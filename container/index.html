
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://davidlatwe.github.io/rezup/container/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.4">
    
    
      
        <title>Container - rezup</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.db9e7362.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#structure" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="rezup" class="md-header__button md-logo" aria-label="rezup" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            rezup
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Container
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="cyan" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/davidlatwe/rezup/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="rezup" class="md-nav__button md-logo" aria-label="rezup" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    rezup
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/davidlatwe/rezup/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_1">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Container
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Container
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remote-container" class="md-nav__link">
    Remote Container
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recipe" class="md-nav__link">
    Recipe
  </a>
  
    <nav class="md-nav" aria-label="Recipe">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-naming" class="md-nav__link">
    File Naming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-content" class="md-nav__link">
    File Content
  </a>
  
    <nav class="md-nav" aria-label="File Content">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#root" class="md-nav__link">
    root
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dotenv" class="md-nav__link">
    dotenv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env" class="md-nav__link">
    env
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pip" class="md-nav__link">
    pip
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rez" class="md-nav__link">
    rez
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension" class="md-nav__link">
    extension
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared" class="md-nav__link">
    shared
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#production-install" class="md-nav__link">
    Production Install
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../command/" class="md-nav__link">
        Command
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scripts/" class="md-nav__link">
        Scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environ/" class="md-nav__link">
        Environ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rezup/" class="md-nav__link">
        rezup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rezup.util/" class="md-nav__link">
        rezup.util
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rezup.util_env/" class="md-nav__link">
        rezup.util_env
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        License
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    Structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#remote-container" class="md-nav__link">
    Remote Container
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recipe" class="md-nav__link">
    Recipe
  </a>
  
    <nav class="md-nav" aria-label="Recipe">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file-naming" class="md-nav__link">
    File Naming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-content" class="md-nav__link">
    File Content
  </a>
  
    <nav class="md-nav" aria-label="File Content">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    description
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#root" class="md-nav__link">
    root
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dotenv" class="md-nav__link">
    dotenv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env" class="md-nav__link">
    env
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pip" class="md-nav__link">
    pip
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rez" class="md-nav__link">
    rez
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension" class="md-nav__link">
    extension
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared" class="md-nav__link">
    shared
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#production-install" class="md-nav__link">
    Production Install
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/davidlatwe/rezup/edit/master/docs/container.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Container</h1>
                
                <h2 id="structure">Structure</h2>
<p>A <em>container</em> provides Rez environment from it's <em>revision</em>.</p>
<p>Each container holds at least one virtual environment folder that named by timestamp, which is a <em>revision</em>. With that convention, the latest version of environment can be sorted out and used without affecting existing container user.</p>
<div class="highlight"><pre><span></span><code>~\.rezup                 # container root
   |
   + - {container}
   |     :
   :     :
   :     + - {revision}  # venv and bin tools lives here
   :     |
         + - {revision}  # folder named as timestamp, e.g. 1619780350.58
         |
         + - {revision}  # take latest when calling `rezup use {container}`
</code></pre></div>
<h2 id="remote-container">Remote Container</h2>
<p>To manage Rez venv in production, we may want every machine to have the same Rez venv setup and try keeping them up-to-date.</p>
<p>For this purpose, a centralized remote container is needed as a guidance for <code>rezup use</code> command to pick the right Rez venv setup from there, and create it locally if needed.</p>
<div class="admonition question">
<p class="admonition-title">How that works ?</p>
<p>When calling <code>rezup use {container}</code>, if the container has remote set, rezup will find the latest valid revision from remote and see if the same revision exists in local and use it. If not, create a new one by the recipe in that remote revision before use.</p>
<p>But what if local container contains revisions that doesn't exists in remote ?</p>
<p>The command <code>rezup use</code> always respect remote revision even there's more latest revision exists in local. Unless <code>rezup use --local</code> is used and remote will be ignored.</p>
</div>
<div class="admonition info">
<p class="admonition-title">The Difference</p>
<p>Both local and remote container have the same structure, the difference is the payload.</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Local</label><div class="tabbed-content">
<p>Where the Rez venv actually exists. Can be created by command
<div class="highlight"><pre><span></span><code>rezup add {container}
</code></pre></div></p>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">Remote</label><div class="tabbed-content">
<p>Only contains the venv installation manifest file (recipe) <code>rezup.toml</code> that uploaded by command
<div class="highlight"><pre><span></span><code>rezup add {container} --remote
</code></pre></div></p>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Local doesn't have to be in local</p>
<p>Local container root can be pointed into network drive, but if that's how it setup, keeps an eye on which Python interpreter is being used or the venv may not be usable.</p>
</div>
<h2 id="recipe">Recipe</h2>
<p>A recipe file defines how a Rez venv should be built.</p>
<h3 id="file-naming">File Naming</h3>
<p>Recipe files usually be saved to and loaded from user home directory, and should be named with container (if not default container) so that command <code>rezup add &lt;container&gt;</code> could pick it up when creating corresponding container, for example:</p>
<ul>
<li><code>~/rezup.toml</code> for container <code>.main</code>, the default</li>
<li><code>~/rezup.dev.toml</code> for container <code>dev</code></li>
<li><code>~/rezup.test.toml</code> for container <code>test</code></li>
<li><code>~/rezup.{name}.toml</code> for container <code>{name}</code></li>
</ul>
<h3 id="file-content">File Content</h3>
<p>A recipe file may look like the following example, see below for details about each section.</p>
<div class="highlight"><pre><span></span><code><span class="n">description</span> <span class="o">=</span> <span class="s">&quot;My rez setup&quot;</span>

<span class="k">[root]</span>
<span class="n">local</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="n">remote</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

<span class="k">[dotenv]</span>

<span class="k">[env]</span>
<span class="n">REZ_CONFIG_FILE</span> <span class="o">=</span> <span class="s">&quot;/path/to/rezconfig.py&quot;</span>
<span class="n">MY_CUSTOMS_ENV</span> <span class="o">=</span> <span class="s">&quot;my value&quot;</span>

<span class="k">[pip]</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&quot;--disable-pip-version-check&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="k">[pip.env]</span>

<span class="k">[rez]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;rez&quot;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;rez&gt;=2.83&quot;</span>   <span class="c1"># a PyPi version specifier or repository path</span>
<span class="n">lib</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&quot;pythonfinder&quot;</span><span class="p">,</span>
    <span class="s">&quot;pyside2&quot;</span><span class="p">,</span>
    <span class="s">&quot;Qt5.py&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="k">[[extension]]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;foo&quot;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;~/dev/foo&quot;</span>
<span class="n">edit</span> <span class="o">=</span> <span class="n">true</span>         <span class="c1"># install this in edit mode (pip --edit)</span>

<span class="k">[[extension]]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bar&quot;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;git+git://github.com/get-bar/bar&quot;</span>
<span class="n">isolation</span> <span class="o">=</span> <span class="n">true</span>    <span class="c1"># additional venv will be created just for this package</span>
<span class="n">python</span> <span class="o">=</span> <span class="mf">2.7</span>        <span class="c1"># the python version for the venv of this package</span>
<span class="n">lib</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;pathlib2&quot;</span><span class="p">]</span>

<span class="p">[</span><span class="n">shared</span><span class="p">]</span>            <span class="c1"># about to be deprecated,</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;prod&quot;</span>       <span class="c1"># use &#39;rez.lib&#39; or &#39;extension.lib&#39; section instead</span>
<span class="n">requires</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;six&quot;</span><span class="p">]</span>
</code></pre></div>
<h4 id="description">description</h4>
<div class="highlight"><pre><span></span><code><span class="n">description</span> <span class="o">=</span> <span class="s">&quot;hello, Rez!&quot;</span>
</code></pre></div>
<p>Like a comment, for knowing what this recipe is for.</p>
<h4 id="root">root</h4>
<p>Define where the root of this container should be.</p>
<div class="highlight"><pre><span></span><code><span class="k">[root]</span>
<span class="n">local</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="n">remote</span> <span class="o">=</span> <span class="s">&quot;/studio/remote/.rezup&quot;</span>
</code></pre></div>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">local</label><div class="tabbed-content">
<p>If the value is <code>false</code> or empty string <code>""</code>, env var <code>REZUP_ROOT_LOCAL</code> will be used, or the default <code>~/.rezup</code>.</p>
</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">remote</label><div class="tabbed-content">
<p>If the value is <code>false</code> or empty string <code>""</code>, env var <code>REZUP_ROOT_REMOTE</code> will be used, or no remote for this container.</p>
</div>
</div>
<h4 id="dotenv">dotenv</h4>
<p>The <code>.env</code> files will be loaded in order when container revision is being used, if provided.</p>
<div class="highlight"><pre><span></span><code><span class="k">[dotenv]</span>
<span class="mi">1</span> <span class="o">=</span> <span class="s">&quot;/to/my.env&quot;</span>    <span class="c1"># non platform specific, load firstly, sort by key</span>
<span class="mi">2</span> <span class="o">=</span> <span class="s">&quot;/to/other.env&quot;</span>
<span class="k">[dotenv.linux]</span>
<span class="n">a</span> <span class="o">=</span> <span class="s">&quot;/to/lnx.env&quot;</span>   <span class="c1"># platform specific, load secondly, sort by key</span>
<span class="k">[dotenv.darwin]</span>
<span class="n">a</span> <span class="o">=</span> <span class="s">&quot;/to/mac.env&quot;</span>   <span class="c1"># platform specific, load secondly, sort by key</span>
<span class="k">[dotenv.windows]</span>
<span class="n">a</span> <span class="o">=</span> <span class="s">&quot;/to/win.env&quot;</span>   <span class="c1"># platform specific, load secondly, sort by key</span>
</code></pre></div>
<p>The key can be anything, they are only for sorting.</p>
<h4 id="env">env</h4>
<p>These will be loaded when container revision is being used, if provided.</p>
<div class="highlight"><pre><span></span><code><span class="k">[env]</span>
<span class="n">REZ_CONFIG_FILE</span> <span class="o">=</span> <span class="s">&quot;/path/to/rezconfig.py&quot;</span>
</code></pre></div>
<h4 id="pip">pip</h4>
<p>Additional pip command options and environment variables to use when <code>pip install</code>-ing packages.</p>
<div class="highlight"><pre><span></span><code><span class="k">[pip]</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&quot;-qq&quot;</span><span class="p">,</span>
    <span class="s">&quot;--retries=2&quot;</span><span class="p">,</span> 
    <span class="s">&quot;--timeout=5&quot;</span><span class="p">,</span>
    <span class="s">&quot;--no-input&quot;</span><span class="p">,</span>
    <span class="s">&quot;--disable-pip-version-check&quot;</span><span class="p">,</span>
    <span class="s">&quot;--proxy=https://user_name:password@proxyname:port&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="k">[pip.env]</span>
<span class="n">HTTP_PROXY</span> <span class="o">=</span> <span class="s">&quot;http://proxyname:port&quot;</span>
<span class="n">HTTPS_PROXY</span> <span class="o">=</span> <span class="s">&quot;http://proxyname:port&quot;</span>
</code></pre></div>
<h4 id="rez">rez</h4>
<p>Rez venv setup configurations</p>
<div class="highlight"><pre><span></span><code><span class="k">[rez]</span>
<span class="c1"># required</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;rez&quot;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;/path/to/source/rez&quot;</span>
<span class="c1"># optional</span>
<span class="n">edit</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">flags</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;-E&quot;</span><span class="p">]</span>
<span class="n">python</span> <span class="o">=</span> <span class="mf">3.7</span>
<span class="n">lib</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">&quot;pythonfinder&quot;</span><span class="p">,</span>
    <span class="s">&quot;pyside2&quot;</span><span class="p">,</span>
    <span class="s">&quot;Qt5.py&quot;</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="center">Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">name</td>
<td align="center">O</td>
<td>The name of the package</td>
</tr>
<tr>
<td align="center">url</td>
<td align="center">O</td>
<td>The url that pass to <code>pip install</code>. Could be version specifier like <code>rez&gt;=2.90</code>, or from version control like <code>git+https://github.com/nerdvegas/rez</code>, or local source path.</td>
</tr>
<tr>
<td align="center">edit</td>
<td align="center">-</td>
<td>Just like <code>pip install -e</code>, install package in edit mode or not.</td>
</tr>
<tr>
<td align="center">python</td>
<td align="center">-</td>
<td>The Python to create venv with. Use current if not set. Could be path to Python executable, or version</td>
</tr>
<tr>
<td align="center">flags</td>
<td align="center">-</td>
<td>Python interpreter flags, default <code>["-E"]</code> if not set. No flag will be added if the value is an empty list.</td>
</tr>
<tr>
<td align="center">lib</td>
<td align="center">-</td>
<td>Additional Python packages to be <code>pip</code> installed with.</td>
</tr>
</tbody>
</table>
<h4 id="extension">extension</h4>
<div class="highlight"><pre><span></span><code><span class="p">[[</span><span class="n">extension</span><span class="p">]]</span>      <span class="c1"># note this is a list but it&#39;s name is not plural</span>
<span class="c1"># required</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;foo&quot;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;foo&gt;=0.5&quot;</span>
<span class="c1"># optional</span>
<span class="n">edit</span> <span class="o">=</span> <span class="kc">false</span>
<span class="n">flags</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;-E&quot;</span><span class="p">]</span>
<span class="n">isolation</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">python</span> <span class="o">=</span> <span class="mf">2.7</span>       <span class="c1"># ignored if `isolation` is false</span>
<span class="n">lib</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;pathlib2&quot;</span><span class="p">]</span>
</code></pre></div>
<p>Just like the section <code>rez</code>, but there's an extra option <code>isolation</code> can be used. Shouldn't be needed in most cases though.</p>
<p>If <code>isolation</code> is true, a venv will be created just for this extension with Rez installed as lib into it. If false as default, the extension will be installed into the Rez venv.</p>
<h4 id="shared">shared</h4>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">shared</span><span class="p">]</span>                <span class="c1"># about to be deprecated,</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;prod&quot;</span>           <span class="c1"># use &#39;rez.lib&#39; or &#39;extension.lib&#39; section instead</span>
<span class="n">requires</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;six&quot;</span><span class="p">]</span>
</code></pre></div>
<div class="tabbed-set" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">To be deprecated</label><div class="tabbed-content">
<p>See <a href="https://github.com/davidlatwe/rezup/issues/62">davidlatwe/rezup#62</a>.</p>
</div>
<input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><label for="__tabbed_3_2">Original description</label><div class="tabbed-content">
<p>or faster deploy, dependency packages can be installed in here, and will be shared across all revisions in one container (all revisions that use same <code>name</code> of shared lib).</p>
<p>This works by creating a <code>.pth</code> file that contains the absolute path of shared lib in Rez venv and only that venv. So this will not be shared with the extension that has <code>isolation</code> set to true.</p>
</div>
</div>
<h2 id="production-install">Production Install</h2>
<p>Rezup installs Rez and the tooling by following Rez installation script's "production-install" schema :</p>
<ol>
<li>Install Rez in a fresh Python virtual environment.</li>
<li>Command line entry-points (bin tools) are all patched with Python interpreter flag <code>-E</code>.</li>
<li>All bin tools get stored in a sub-directory of regular Python bin tools install location (<code>{venv}/bin/rez</code> or <code>{venv}/Scripts/rez</code> on Windows).</li>
</ol>
<p>See Rez Wiki <a href="https://github.com/nerdvegas/rez/wiki/Installation#why-not-pip-for-production">Why Not Pip For Production?</a> section for a bit more detail.</p>
<p>But if Rez gets installed in <em>edit-mode</em>, it will fail to compute the location of those production-installed bin tools and not able to provide features like nesting resolved contexts or running some specific rez tests.</p>
<p>Rezup covers this situation by using custom entry-point script. If Rez is going to be installed in edit-mode, all bin tools will be generated with the custom script, which will pre-cache the location of bin tools when the session starts if, the environment variable <code>REZUP_EDIT_IN_PRODUCTION</code> exists and is not empty (see <a href="https://github.com/davidlatwe/rezup/pull/56">davidlatwe/rezup#56</a> for implementation detail).</p>
<p>You may put that env var in e.g. <code>rezup.dev.toml</code> like this:</p>
<div class="highlight"><pre><span></span><code><span class="k">[env]</span>
<span class="n">REZUP_EDIT_IN_PRODUCTION</span> <span class="o">=</span> <span class="s">&quot;1&quot;</span>

<span class="k">[rez]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;rez&quot;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;/path/to/source/rez&quot;</span>
<span class="n">edit</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Overview
            </div>
          </div>
        </a>
      
      
        
        <a href="../command/" class="md-footer__link md-footer__link--next" aria-label="Next: Command" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Command
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.8397ff9e.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.1e84347e.min.js"></script>
      
    
  </body>
</html>